<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE devices PUBLIC "-//YARP//DTD yarprobotinterface 3.0//EN" "http://www.yarp.it/DTD/yarprobotinterfaceV3.0.dtd">


    <device xmlns:xi="http://www.w3.org/2001/XInclude" name="wholebodydynamics" type="wholebodydynamics">
        <param name="axesNames">(torso_pitch,torso_roll,torso_yaw,neck_pitch, neck_roll,neck_yaw,l_shoulder_pitch,l_shoulder_roll,l_shoulder_yaw,l_elbow,r_shoulder_pitch,r_shoulder_roll,r_shoulder_yaw,r_elbow,l_hip_pitch,l_hip_roll,l_hip_yaw,l_knee,l_ankle_pitch,l_ankle_roll,r_hip_pitch,r_hip_roll,r_hip_yaw,r_knee,r_ankle_pitch,r_ankle_roll)</param>
        <param name="modelFile">model.urdf</param>
        <param name="fixedFrameGravity">(0,0,-9.81)</param>
        <param name="assumeFixed">l_sole</param>
        <param name="defaultContactFrames">(l_hand,r_hand,root_link,l_sole,r_sole,r_lower_leg,l_lower_leg,l_elbow_1,r_elbow_1)</param>
        <param name="imuFrameName">imu_frame</param>
        <param name="publishOnROS">true</param>
        
        <param name="useJointVelocity">true</param>
        <param name="useJointAcceleration">false</param>
        
        <!-- map between iDynTree links (identified by a name)
             and skinDynLib links (identified by their frame name, a BodyPart enum
             and a local (to the body part) index -->
        <group name="IDYNTREE_SKINDYNLIB_LINKS">
            <param name="root_link">(root_link,1,0)</param>
            <param name="chest"> (chest,1,2)</param>
            <param name="l_upper_arm">(l_upper_arm,3,2)</param>
            <param name="l_elbow_1">(l_elbow_1, 3, 4)</param>
            <param name="r_upper_arm">(r_upper_arm,4,2)</param>
            <param name="r_elbow_1">(r_elbow_1, 4, 4)</param>
            <param name="l_lower_leg">(l_lower_leg,5,3)</param>
            <param name="l_ankle_1">(l_ankle_1,5,4)</param>
            <param name="l_foot">(l_foot_dh_frame,5,5)</param>
            <param name="r_lower_leg">(r_lower_leg,6,3)</param>
            <param name="r_ankle_1">(r_ankle_1,6,4)</param>
            <param name="r_foot">(r_foot_dh_frame,6,5)</param>
        </group>

        <group name="GRAVITY_COMPENSATION">
            <param name="enableGravityCompensation">true</param>
            <param name="gravityCompensationBaseLink">root_link</param>
            <param name="gravityCompensationAxesNames">(torso_pitch,torso_roll,torso_yaw,neck_pitch,neck_roll,neck_yaw,l_shoulder_pitch,l_shoulder_roll,l_shoulder_yaw,l_elbow,r_shoulder_pitch,r_shoulder_roll,r_shoulder_yaw,r_elbow)</param>
        </group>

        <group name="WBD_OUTPUT_EXTERNAL_WRENCH_PORTS">
            <param name="/wholeBodyDynamics/left_foot/cartesianEndEffectorWrench:o">(l_foot,l_sole,l_sole)</param>
            <param name="/wholeBodyDynamics/right_foot/cartesianEndEffectorWrench:o">(r_foot,r_sole,r_sole)</param>
        </group>

        <group name="FT_SECONDARY_CALIBRATION"> 
            <param name="r_leg_ft_sensor"> (6.492039e-01,-3.057566e-02,-6.403655e-02,-2.798936e-01,9.861727e-01,-9.209090e-04 
            ,9.243939e-03,7.182864e-01,1.853126e-02,3.430592e-01,-2.128877e-03,3.126872e+00 
            ,-1.028764e-01,-9.674079e-02,9.476095e-01,-6.322896e-01,5.465688e-01,8.135168e-01 
            ,-3.094759e-03,-2.063945e-02,3.126744e-03,8.443718e-01,9.116233e-03,-2.582457e-02 
            ,6.697343e-03,-8.516919e-03,3.705750e-03,-6.470638e-02,8.833372e-01,4.182280e-02 
            ,1.515284e-03,5.719407e-03,4.143864e-04,3.247302e-02,-1.080367e-02,8.648444e-01)</param> 
            <param name="l_leg_ft_sensor"> (8.706950e-01,-2.317151e-02,-4.243044e-02,7.298404e-02,7.804313e-02,-7.876044e-01 
             ,-5.751855e-02,5.190587e-01,9.129862e-03,-9.174840e-01,8.798229e-02,1.809192e+00 
             ,-4.834163e-02,3.113637e-01,9.131144e-01,2.064699e+00,1.281970e-01,8.161439e-01 
             ,2.633075e-03,-1.456164e-02,-2.425348e-03,8.481970e-01,-1.121068e-02,-5.178450e-03 
             ,2.241750e-03,1.947869e-03,5.856470e-04,-4.180402e-03,9.136330e-01,-9.040442e-02 
             ,5.947306e-05,-1.060974e-03,-3.246556e-04,-1.941046e-02,-4.257953e-03,8.617125e-01)</param> 
            <param name="r_foot_ft_sensor"> (8.990463e-01,2.394819e-02,-2.410729e-02,-9.382220e-02,1.702240e+00,9.935117e-01 
             ,-6.792484e-03,5.614845e-01,2.148790e-02,1.446060e+00,-4.133051e-02,1.798510e+00 
             ,-1.455043e-01,6.618823e-02,9.897537e-01,-2.804052e-01,-8.478292e-01,-4.298784e+00 
             ,-1.305796e-03,-1.002028e-02,1.130451e-02,3.373979e-01,2.554469e-02,8.447654e-02 
             ,-6.387346e-03,1.420631e-03,-5.442112e-03,-6.615701e-02,2.865650e-01,-1.171312e-01 
             ,-1.537783e-03,-3.655309e-04,-6.720577e-04,3.739777e-02,5.963801e-02,8.212660e-01)</param>
             <param name="l_foot_ft_sensor"> (9.266650e-01,-5.979044e-03,-1.138730e-02,-4.261890e-02,1.405395e+00,-1.627316e+00 
             ,-3.434337e-02,5.471152e-01,7.331543e-03,1.310436e+00,-2.703118e-02,1.465369e+00 
             ,-1.590049e-01,4.838790e-02,9.918366e-01,-5.612223e-01,-6.093405e-01,9.779857e-01 
             ,-2.725285e-03,2.472033e-03,-1.278149e-03,7.645567e-01,1.082244e-01,3.676009e-01 
             ,-9.524886e-04,1.852992e-03,-1.316770e-02,5.373357e-02,2.144677e-01,5.276815e-02 
             ,-1.002977e-03,2.174250e-03,5.638745e-04,6.719249e-02,-3.191642e-02,5.486184e-01)</param>
        </group>


        <action phase="startup" level="15" type="attach">
            <paramlist name="networks">
                <!-- motorcontrol and virtual torque sensors -->
                <elem name="left_lower_leg">left_leg-eb7-j4_5-mc</elem>
                <elem name="right_lower_leg">right_leg-eb9-j4_5-mc</elem>
                <elem name="left_upper_leg">left_leg-eb6-j0_3-mc</elem>
                <elem name="right_upper_leg">right_leg-eb8-j0_3-mc</elem>
                <elem name="torso">torso-eb5-j0_2-mc</elem>
                <elem name="right_lower_arm">right_arm-eb4-j4_15-mc</elem>
                <elem name="left_lower_arm">left_arm-eb2-j4_15-mc</elem>
                <elem name="right_upper_arm">right_arm-eb3-j0_3-mc</elem>
                <elem name="left_upper_arm">left_arm-eb1-j0_3-mc</elem>
                <elem name="head-j0">head-eb20-j0_1-mc</elem>
                <elem name="head-j2">head-eb21-j2_5-mc</elem>
                <!-- imu -->
                <elem name="imu">inertial</elem>
                <!-- ft -->
                <elem name="l_arm_ft_sensor">left_arm-eb1-j0_3-strain</elem>
                <elem name="r_arm_ft_sensor">right_arm-eb3-j0_3-strain</elem>
                <elem name="l_leg_ft_sensor">left_leg-eb6-j0_3-strain</elem>
                <elem name="r_leg_ft_sensor">right_leg-eb8-j0_3-strain</elem>
                <elem name="l_foot_ft_sensor">left_leg-eb7-j4_5-strain</elem>
                <elem name="r_foot_ft_sensor">right_leg-eb9-j4_5-strain</elem>
            </paramlist>
        </action>

        <action phase="shutdown" level="2" type="detach" />

    </device>


